<article class="doc-article">
<h1 id="复制到">复制到</h1>
<p><img src="./imgs/img26.png" /></p>
<h2 id="功能概述">功能概述</h2>
<p>复制到功能是 TransX 中用于在同一项目的不同 .strings
文件之间进行本地化内容迁移和复用的专业工具。该功能支持将一个或多个本地化条目（包括其
Key、所有语言的翻译、注释和常量信息）完整地复制到目标 .strings
文件中，实现跨文件的内容共享和重用。</p>
<p><strong>核心价值</strong>：</p>
<ul>
<li><strong>避免重复劳动</strong>：无需在目标文件中重新创建相同的 Key
和翻译</li>
<li><strong>保持翻译一致性</strong>：确保相同文案在不同文件中使用统一的翻译</li>
<li><strong>加速模块化开发</strong>：支持快速构建独立模块的本地化资源</li>
<li><strong>降低错误风险</strong>：自动化复制减少手工输入导致的错误</li>
</ul>
<p>该功能特别适用于模块化项目、应用扩展开发、通用文案库建设等场景。</p>
<h2 id="工作原理">工作原理</h2>
<p>在 iOS/macOS 开发中，一个项目可能包含多个 .strings
文件，用于不同的模块或功能：</p>
<ul>
<li><code>Localizable.strings</code>：应用的主要本地化文件</li>
<li><code>Settings.strings</code>：设置页面的本地化文件</li>
<li><code>InfoPlist.strings</code>：应用信息和权限描述的本地化文件</li>
<li><code>Widget.strings</code>：小组件的本地化文件</li>
<li>各种自定义的模块化 .strings 文件</li>
</ul>
<p>复制到功能允许在这些文件之间共享本地化内容，避免重复劳动。</p>
<h2 id="使用场景">使用场景</h2>
<h3 id="场景-1通用文案复用">场景 1：通用文案复用</h3>
<p><strong>背景</strong>： 项目中有
<code>Localizable.strings</code>（主应用）和
<code>Widget.strings</code>（小组件）两个文件。在主应用中创建了"确定"、"取消"、"关闭"等通用按钮文案，小组件中也需要使用这些文案。</p>
<p><strong>操作流程</strong>：</p>
<ol type="1">
<li>在导航区选择 <code>Localizable.strings</code> 文件</li>
<li>在内容列表中选中需要复用的条目（如"确定"、"取消"、"关闭"）</li>
<li>右键点击选中的条目，选择"复制到"菜单项</li>
<li>在弹出的文件列表中选择 <code>Widget.strings</code></li>
<li>确认操作，所选条目及其所有语言翻译会被复制到目标文件</li>
<li>切换到 <code>Widget.strings</code> 验证内容已成功复制</li>
</ol>
<p><strong>优势</strong>：</p>
<ul>
<li>避免在 Widget.strings 中重新创建相同的 Key</li>
<li>自动复制所有语言的翻译，无需逐个语言处理</li>
<li>确保不同文件中相同文案的翻译一致性</li>
</ul>
<h3 id="场景-2模块拆分">场景 2：模块拆分</h3>
<p><strong>背景</strong>： 原本所有本地化内容都在
<code>Localizable.strings</code> 中，现在要将设置相关的内容拆分到独立的
<code>Settings.strings</code> 文件中。</p>
<p><strong>操作流程</strong>：</p>
<ol type="1">
<li>创建新的 <code>Settings.strings</code> 文件并添加到项目</li>
<li>在 TransX 中刷新项目，识别新文件</li>
<li>在 <code>Localizable.strings</code>
中筛选或搜索所有设置相关的条目</li>
<li>全选这些条目</li>
<li>使用"复制到"功能，将它们复制到 <code>Settings.strings</code></li>
<li>验证复制成功后，可以选择性地从原文件中删除这些条目</li>
</ol>
<h3 id="场景-3扩展与主应用共享文案">场景 3：扩展与主应用共享文案</h3>
<p><strong>背景</strong>： 应用添加了Today Extension、Share
Extension、App Clip
等扩展，这些扩展需要使用主应用中的部分本地化文案。</p>
<p><strong>操作流程</strong>：</p>
<ol type="1">
<li>为每个扩展创建独立的 .strings 文件</li>
<li>识别扩展需要使用的文案（如网络错误提示、通用按钮等）</li>
<li>从主应用的 Localizable.strings 中选择这些条目</li>
<li>使用"复制到"功能分别复制到各个扩展的 .strings 文件中</li>
</ol>
<p><strong>注意事项</strong>：
由于扩展和主应用运行在不同的进程中，即使文案相同，也需要在各自的
.strings 文件中独立存在。</p>
<h3 id="场景-4快速修正创建错误">场景 4：快速修正创建错误</h3>
<p><strong>背景</strong>： 开发人员在快速开发时，忘记切换 .strings
文件，在文件 A 中创建了几条本应属于文件 B 的条目。</p>
<p><strong>传统方式的问题</strong>：</p>
<ul>
<li>切换到文件 B 重新创建，需要重新输入所有 Key 和翻译</li>
<li>如果已经有部分翻译完成，删除会造成工作浪费</li>
<li>需要记住所有的 Key 和对应的翻译内容</li>
</ul>
<p><strong>使用"复制到"的解决方案</strong>：</p>
<ol type="1">
<li>选中误创建在文件 A 中的条目</li>
<li>使用"复制到"功能将它们复制到正确的文件 B</li>
<li>验证复制成功后，从文件 A 中删除这些条目</li>
</ol>
<h2 id="操作步骤">操作步骤</h2>
<h3 id="标准操作流程">标准操作流程</h3>
<ol type="1">
<li><p><strong>确认源文件</strong>：</p>
<ul>
<li>在导航区选择包含要复制内容的源 .strings 文件</li>
<li>确保文件已加载并显示在内容区</li>
</ul></li>
<li><p><strong>选择条目</strong>：</p>
<ul>
<li>在内容列表中选中一条或多条要复制的条目</li>
<li>使用 <code>Command + 点击</code> 多选不连续的条目</li>
<li>使用 <code>Shift + 点击</code> 选择连续的多条</li>
<li>可以使用搜索或筛选功能先定位目标条目</li>
</ul></li>
<li><p><strong>执行复制</strong>：</p>
<ul>
<li>在选中的条目上右键点击</li>
<li>选择"复制到"菜单项</li>
<li>在弹出的对话框中查看可用的目标文件列表</li>
</ul></li>
<li><p><strong>选择目标</strong>：</p>
<ul>
<li>从列表中选择目标 .strings 文件</li>
<li>确认选择正确的目标文件</li>
</ul></li>
<li><p><strong>验证结果</strong>：</p>
<ul>
<li>切换到目标文件</li>
<li>查找刚复制的条目，确认内容完整</li>
<li>检查所有语言的翻译是否都已复制</li>
</ul></li>
</ol>
<h2 id="key-冲突处理">Key 冲突处理</h2>
<p>在 .strings 文件中，每个 Key
必须是唯一的。复制操作会检查目标文件中是否已存在相同的 Key：</p>
<h3 id="冲突检测">冲突检测</h3>
<p><strong>情况 1：Key 不存在</strong></p>
<ul>
<li>直接复制条目及其所有数据到目标文件</li>
<li>这是最常见和最安全的情况</li>
</ul>
<p><strong>情况 2：Key 已存在</strong></p>
<ul>
<li>TransX 会检测到 Key 冲突</li>
<li>弹出冲突处理对话框，提供以下选项：
<ul>
<li><strong>跳过</strong>：不复制此条目，保留目标文件中的原有内容</li>
<li><strong>覆盖</strong>：用源文件的内容覆盖目标文件中的现有条目</li>
<li><strong>重命名</strong>：为复制的条目生成新的 Key（如添加后缀
<code>_copy</code>）</li>
</ul></li>
</ul>
<h3 id="数据完整性保证">数据完整性保证</h3>
<p>复制操作会确保以下数据的完整性：</p>
<ul>
<li><strong>Key 值</strong>：原样复制</li>
<li><strong>所有语言的翻译</strong>：包括项目中配置的所有语言</li>
<li><strong>常量名称</strong>：如果源条目有常量，也会一起复制</li>
</ul>
<h2 id="与移动到功能的区别">与"移动到..."功能的区别</h2>
<table>
<thead>
<tr>
<th>特性</th>
<th>复制到</th>
<th>移动到...</th>
</tr>
</thead>
<tbody>
<tr>
<td>源文件变化</td>
<td>保留原条目</td>
<td>删除原条目</td>
</tr>
<tr>
<td>目标文件变化</td>
<td>添加新条目</td>
<td>添加新条目</td>
</tr>
<tr>
<td>适用场景</td>
<td>内容复用、共享</td>
<td>重组、纠错</td>
</tr>
<tr>
<td>Key 冲突</td>
<td>需要处理冲突</td>
<td>需要处理冲突</td>
</tr>
<tr>
<td>可撤销性</td>
<td>可以删除目标文件中的条目</td>
<td>需要再移动回去</td>
</tr>
</tbody>
</table>
<p><strong>选择建议</strong>：</p>
<ul>
<li>如果内容需要在多个文件中同时存在，使用"复制到"</li>
<li>如果内容应该从一个文件转移到另一个文件，使用"移动到..."</li>
</ul>
<h2 id="注意事项">注意事项</h2>
<ol type="1">
<li><strong>保存提醒</strong>：复制操作会修改目标文件，记得及时保存</li>
<li><strong>版本控制</strong>：复制大量内容前，建议先提交当前更改，便于回退</li>
<li><strong>Key 冲突</strong>：复制前可以先检查目标文件是否已存在相同的
Key</li>
<li><strong>翻译完整性</strong>：复制后检查目标文件中的条目是否有缺失的翻译</li>
<li><strong>分组归属</strong>：复制的条目在目标文件中会进入默认分组或保持原分组（如果目标文件有同名分组）</li>
<li><strong>权限检查</strong>：确保目标文件可写且未被其他程序锁定</li>
<li><strong>大量复制</strong>：复制数百条记录时可能需要较长时间，请耐心等待</li>
<li><strong>代码引用</strong>：如果复制的 Key
原本只在一个模块中使用，复制到其他文件后注意代码引用关系</li>
<li><strong>文件同步</strong>：在团队协作中，复制操作后记得同步给团队成员</li>
<li><strong>备份建议</strong>：对于重要项目，复制大量数据前建议备份
.strings 文件</li>
</ol>
<h2 id="最佳实践">最佳实践</h2>
<ol type="1">
<li><strong>规划文件结构</strong>：提前规划好各个 .strings
文件的职责范围，减少频繁复制的需要</li>
<li><strong>建立通用库</strong>：创建一个专门的
<code>Common.strings</code> 文件，存放各处都可能用到的通用文案</li>
<li><strong>定期整理</strong>：定期检查各文件间是否有重复的
Key，考虑是否需要合并或拆分</li>
<li><strong>命名规范</strong>：使用有意义的 Key 前缀区分不同模块，如
<code>widget.</code>, <code>settings.</code>, <code>main.</code></li>
<li><strong>文档记录</strong>：在项目文档中说明各 .strings
文件的用途和它们之间的关系</li>
<li><strong>验证测试</strong>：复制后在各个模块中测试本地化内容是否正确显示</li>
<li><strong>增量复制</strong>：优先使用增量复制而非全量复制，避免不必要的冲突</li>
<li><strong>冲突预防</strong>：复制前先搜索目标文件，确认 Key
不存在</li>
</ol>

</article>
