# 导出

![](./imgs/img36.png)

## 功能概述

导出功能允许将本地化条目导出为外部文件格式,便于团队协作、数据备份、翻译外包或生成文档。TransX 支持将选中的条目或全部内容导出,默认导出格式为 CSV（逗号分隔值）,该格式可被 Excel、Google Sheets 等工具直接打开和编辑。

## 核心特性

### 灵活的导出范围

**选中内容导出**:
- 导出当前选中的一条或多条本地化条目
- 支持从搜索结果、筛选结果或暂存区中导出选中内容
- 适用于部分内容的分享或审核

**全部内容导出**:
- 导出当前文件或分组的所有本地化条目
- 生成完整的本地化内容清单
- 适用于备份、归档或完整导出

### CSV 格式优势

**通用性强**:
- 几乎所有表格工具都支持 CSV 格式
- Excel、Numbers、Google Sheets 可直接打开
- 便于使用各种工具进行数据分析

**易于编辑**:
- 使用表格工具可视化编辑
- 支持批量查找替换
- 便于添加审核意见和批注

**便于导入**:
- 修改后可重新导入 TransX
- 支持与翻译管理平台集成
- 便于版本对比和合并

## 导出内容结构

### 标准导出列

导出的 CSV 文件通常包含以下列:

1. **Key**: 本地化条目的唯一标识符
2. **Constant/常量**: 生成的常量名称（如果有）
3. **各语言列**: 每种语言对应一列
   - 中文（简体）
   - 中文（繁体）
   - English
   - 日本語
   - 等项目中配置的所有语言

### 导出示例

```csv
Key,Comment,Constant,中文（简体）,English,日本語
com.app.login.title,登录页标题,LOGIN_TITLE,登录,Login,ログイン
com.app.button.submit,提交按钮,BUTTON_SUBMIT,提交,Submit,送信
com.app.error.network,网络错误提示,ERROR_NETWORK,网络连接失败,Network connection failed,ネットワーク接続に失敗しました
```

## 操作步骤

### 导出选中内容

1. **选择条目**:
   - 在内容列表中选中需要导出的条目
   - 可使用 `Command + 点击` 多选不连续的条目
   - 使用 `Shift + 点击` 选择连续的多条
   - 使用 `Command + A` 全选当前视图的所有条目

2. **执行导出**:
   - 在选中的条目上右键点击
   - 选择"导出选中内容"菜单项

3. **选择保存位置**:
   - 在弹出的保存对话框中选择目标文件夹
   - 输入文件名
   - 确认文件格式为 .csv

4. **完成导出**:
   - 点击"保存"按钮
   - TransX 生成 CSV 文件
   - 完成后会显示成功提示

### 导出全部内容

1. **确认导出范围**:
   - 确认当前在正确的 .strings 文件
   - 如果应用了筛选,确认是否需要清除筛选
   - 确定是要导出全部还是当前分组

2. **执行导出**:
   - 在内容列表区域右键点击（不选中任何条目）
   - 选择"导出全部内容"或"导出"菜单项
   - 或使用菜单栏的"文件 > 导出"

3. **保存文件**:
   - 选择保存位置和文件名
   - 点击保存

## 使用场景

### 场景 1: 翻译外包

**背景**:
公司新增了韩语和西班牙语支持,需要将所有条目发给翻译公司进行翻译。

**操作流程**:
1. 清除所有筛选,确保显示全部内容
2. 导出全部内容为 CSV 文件
3. 将文件发送给翻译公司
4. 翻译公司在 Excel 中填写韩语和西班牙语列
5. 收到译文后,通过导入功能更新到 TransX

**优势**:
- 翻译公司无需安装 TransX
- 使用熟悉的 Excel 工具
- 便于管理翻译进度

### 场景 2: 内容审核

**背景**:
产品经理需要审核所有用户可见的文案,确保措辞准确、语气一致。

**操作流程**:
1. 筛选出特定分组（如"用户界面"）
2. 导出筛选结果
3. 在 Excel 中添加"审核意见"列
4. 产品经理标注需要修改的地方
5. 开发人员根据审核意见在 TransX 中修改

### 场景 3: 术语一致性检查

**背景**:
需要检查"用户"、"账号"等核心术语的使用是否统一。

**操作流程**:
1. 搜索"用户",将结果加入暂存区
2. 搜索"账号",继续加入暂存区
3. 导出暂存区内容
4. 在 Excel 中使用排序、筛选功能分析
5. 标记不一致的地方
6. 返回 TransX 修正

### 场景 4: 版本备份

**背景**:
重大版本发布前,备份当前的本地化内容。

**操作流程**:
1. 导出所有 .strings 文件的全部内容
2. 按文件名和版本号命名（如 `Localizable_v2.0.csv`）
3. 保存到版本归档目录
4. 如果后续需要回退,可以从备份恢复

### 场景 5: 翻译进度报告

**背景**:
项目经理需要统计各语言的翻译完成度。

**操作流程**:
1. 导出全部内容
2. 在 Excel 中分析:
   - 统计每种语言的空白单元格数量
   - 计算翻译完成百分比
   - 生成进度图表
3. 制作翻译进度报告

### 场景 6: 跨项目复用

**背景**:
新项目需要复用旧项目的部分本地化内容。

**操作流程**:
1. 在旧项目中筛选可复用的条目（如通用按钮、错误提示）
2. 导出选中的内容
3. 在新项目中通过导入功能添加这些条目
4. 根据需要调整 Key 和内容

## 导出后的处理

### Excel 编辑技巧

**查找重复翻译**:
- 使用 Excel 的"条件格式 > 突出显示单元格规则 > 重复值"
- 快速识别重复的翻译文本
- 检查这些重复是否合理

**翻译进度统计**:
- 使用 `COUNTBLANK()` 函数统计空白单元格
- 使用 `COUNTA()` 函数统计已填充单元格
- 计算完成百分比

**术语一致性检查**:
- 使用 Excel 的筛选功能
- 搜索特定术语
- 检查不同上下文中的使用是否一致

### 版本对比

**对比两个版本的差异**:
1. 导出旧版本为 `v1.csv`
2. 导出新版本为 `v2.csv`
3. 使用对比工具（如 Beyond Compare、diff 命令）
4. 识别新增、删除、修改的条目

## 注意事项

1. **编码问题**: 确保 CSV 文件使用 UTF-8 编码,避免中文乱码
2. **Excel 打开 CSV**: Excel 可能需要通过"数据 > 导入文本"正确打开 UTF-8 编码的 CSV
3. **逗号转义**: 如果翻译内容包含逗号,CSV 会用引号包裹,导入时注意处理
4. **换行符处理**: 多行文本在 CSV 中需要特殊处理,查看时可能显示异常
5. **筛选状态**: 导出时注意当前是否应用了筛选,避免遗漏内容
6. **暂存区导出**: 从暂存区导出的内容仅限暂存区中的条目
7. **大文件性能**: 导出数千条记录可能需要一些时间,请耐心等待
8. **重新导入**: 如果计划修改后重新导入,确保 Key 列不要被修改
9. **备份原文件**: 导出是只读操作,不会修改原始 .strings 文件

## 最佳实践

### 导出前的准备

1. **清理数据**:
   - 检查是否有明显的错误条目
   - 确认筛选和搜索已清除（除非有意导出部分内容）

2. **确认范围**:
   - 明确导出目的（全部、部分、特定分组）
   - 检查当前文件和分组是否正确

3. **命名规范**:
   - 使用清晰的文件命名（如 `Localizable_2024-12-27.csv`）
   - 包含版本号、日期等标识信息

### 导出后的检查

1. **打开验证**:
   - 用 Excel 或其他工具打开导出文件
   - 检查编码是否正确（无乱码）
   - 确认列数和行数符合预期

2. **抽查内容**:
   - 随机抽查几条内容
   - 确认 Key、翻译、注释等都完整

3. **文件归档**:
   - 将导出文件保存到合适的位置
   - 添加到版本控制系统（如需要）

### 协作流程

**翻译协作流程**:
1. 导出待翻译内容
2. 在文件名或邮件中说明需要翻译的语言列
3. 提供翻译指南和术语表
4. 设置截止日期
5. 收到译文后导入并审核

**审核流程**:
1. 导出需要审核的内容
2. 在 Excel 中添加"审核状态"、"意见"等列
3. 审核人员填写意见
4. 开发人员根据意见修改
5. 再次导出验证

## 与版本控制的配合

### Git 工作流

**场景**: 使用 Git 追踪导出文件的变化

**操作**:
1. 定期导出本地化内容到固定路径
2. 将导出文件加入 Git 仓库
3. 每次更新后重新导出并提交
4. 通过 Git diff 查看本地化内容的变化历史

**优势**:
- 文本格式易于 diff
- 便于追踪谁修改了什么
- 可以回退到历史版本

### CI/CD 集成

**自动化导出**:
- 在 CI 流程中自动导出本地化内容
- 生成翻译覆盖率报告
- 检测缺失翻译并标记 PR
- 自动发送待翻译内容给翻译团队

## 常见问题

**Q: 导出的 CSV 在 Excel 中打开显示乱码怎么办?**  
A: Excel 默认可能不识别 UTF-8 编码。解决方法:
1. 使用"数据 > 获取数据 > 从文本/CSV"导入
2. 选择编码为 UTF-8
3. 或使用 Numbers、Google Sheets 等工具打开

**Q: 导出的文件可以直接修改后导入吗?**  
A: 可以,但注意:
- 不要修改 Key 列（否则会被识别为新条目）
- 保持文件结构和列顺序
- 确保编码仍为 UTF-8

**Q: 导出时是否包含回收区的内容?**  
A: 通常不包含。回收区内容需要单独导出。

**Q: 如何确保导出的内容是最新的?**  
A: 导出前先保存文件,确保所有修改都已写入 .strings 文件。