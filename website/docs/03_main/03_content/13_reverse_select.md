# 反向选择

![](./imgs/img32.png)

## 功能概述

反向选择功能用于快速反转当前的选中状态:将已选中的条目变为未选中,将未选中的条目变为已选中。这个功能在需要选择大量条目但只有少数例外的场景中特别有用,遵循"排除法"的选择策略,可以将操作次数从数十次甚至上百次减少到个位数,极大提高批量选择的效率。是处理大规模数据筛选的必备工具。

## 工作原理

### 选择状态反转

反向选择的逻辑非常简单直接：

**操作前**：
- 条目 A：✅ 已选中
- 条目 B：✅ 已选中  
- 条目 C：☐ 未选中
- 条目 D：☐ 未选中
- 条目 E：✅ 已选中

**执行反向选择后**：
- 条目 A：☐ 未选中
- 条目 B：☐ 未选中
- 条目 C：✅ 已选中
- 条目 D：✅ 已选中
- 条目 E：☐ 未选中

### 作用范围

反向选择只影响当前可见的条目：
- 在主列表中：作用于当前分组或筛选结果中的所有条目
- 在搜索结果中：作用于搜索结果中的所有条目
- 在暂存区中：作用于暂存区中的所有条目

## 操作步骤

### 基础操作

1. **初始选择**：
   - 选中少数不需要的条目
   - 或选中少数需要排除的条目

2. **执行反向选择**：
   - 在选中区域或列表空白处右键点击
   - 选择"反向选择"菜单项
   - 或使用快捷键（如 `Command + Shift + I`，具体取决于实现）

3. **验证结果**：
   - 原来选中的条目变为未选中
   - 原来未选中的条目变为选中
   - 检查选中的条目是否符合预期

4. **继续操作**：
   - 对新的选中状态执行批量操作
   - 如删除、移动、导出等

## 使用场景详解

### 场景 1：排除少数条目的批量操作

**背景**：
搜索到了 100 条包含"错误"的提示文案，其中只有 3 条是网络相关的错误不需要处理，其余 97 条都需要批量修改。

**传统方式的问题**：
- 需要逐个点击选中 97 条，非常耗时
- 容易遗漏或选错
- 操作繁琐，效率低下

**使用反向选择的解决方案**：
1. 搜索"错误"，得到 100 条结果
2. 仔细查找，找到那 3 条网络错误相关的条目
3. 只选中这 3 条（按住 `Command` 多选）
4. 右键选择"反向选择"
5. 现在选中的是其余 97 条
6. 对这 97 条执行批量操作（如修改翻译、添加注释等）

**效率对比**：
- 传统方式：需要 97 次点击
- 反向选择：只需 3 次点击 + 1 次反向选择 = 4 次操作

### 场景 2：筛选结果的例外处理

**背景**：
使用"缺失翻译"筛选，显示了 50 条缺少日语翻译的条目。其中 5 条是技术术语，不需要翻译，保持英文即可。其余 45 条需要补齐翻译。

**操作流程**：
1. 应用"缺失翻译"筛选，得到 50 条结果
2. 浏览结果，找到那 5 条技术术语条目
3. 选中这 5 条
4. 执行"反向选择"
5. 现在选中了需要翻译的 45 条
6. 对这 45 条执行"补齐多语言文本"操作

### 场景 3：分组内容的部分导出

**背景**：
"设置"分组有 30 条本地化内容，需要导出其中的 28 条给翻译团队，排除 2 条内部调试用的条目。

**操作流程**：
1. 在导航区选择"设置"分组
2. 在内容列表中找到那 2 条调试条目
3. 选中这 2 条
4. 执行"反向选择"
5. 现在选中了需要导出的 28 条
6. 导出选中的内容

### 场景 4：批量删除的精确控制

**背景**：
某个功能模块废弃，需要删除相关的所有本地化条目（约 40 条），但其中有 2 条文案被其他模块复用，不能删除。

**操作流程**：
1. 搜索该功能模块的所有条目（如通过 Key 前缀）
2. 在搜索结果中找到那 2 条被复用的条目
3. 选中这 2 条
4. 执行"反向选择"
5. 现在选中了需要删除的 38 条
6. 执行删除操作
7. 那 2 条被复用的条目得以保留

### 场景 5：质量检查的高效标记

**背景**：
QA 审核了某个分组的 60 条翻译，发现只有 5 条有问题需要修改，其余都合格。需要将这 5 条加入暂存区集中处理。

**传统方式**：
- 逐个找到这 5 条，分别加入暂存区
- 容易遗漏

**使用反向选择**：
1. 在该分组中全选 60 条（`Command + A`）
2. 按住 `Command` 点击那 55 条合格的条目，取消选中
3. 但这样仍然需要 55 次点击...

**更好的方式**：
1. 只选中那 5 条有问题的
2. 将这 5 条加入暂存区
3. 在暂存区中集中处理（不需要用到反向选择，这个场景其实不太适合）

**更合适的反向选择场景**：
如果需求是"将合格的 55 条导出"：
1. 选中有问题的 5 条
2. 反向选择
3. 导出选中的 55 条

## 操作技巧

### 与搜索结合

**高效工作流**：
1. 搜索定位到一批条目
2. 在搜索结果中选中不需要的少数条目
3. 反向选择
4. 批量操作选中的条目
5. 清除搜索，返回正常视图

### 与筛选结合

**示例**：
1. 筛选"最近修改"，得到本周修改的 80 条
2. 其中 5 条是误操作，不应包含在本次提交中
3. 选中这 5 条
4. 反向选择，得到正常修改的 75 条
5. 可以基于这个选择进行导出、检查等操作

### 多次反向选择

可以多次使用反向选择来精细化选择：

**示例流程**：
1. 全选 100 条（`Command + A`）
2. 按住 `Command` 点击排除 10 条
3. 现在选中 90 条
4. 反向选择，现在选中那 10 条
5. 再次反向选择，又回到 90 条

注意：多次反向选择只会在原来选中和未选中两个状态间切换。

### 配合全选使用

**快速选择策略**：

**情况 A**：需要的条目多于不需要的
1. 全选（`Command + A`）
2. 按住 `Command` 点击不需要的条目取消选中
3. 完成

**情况 B**：不需要的条目多于需要的
1. 全选（`Command + A`）
2. 反向选择（现在全部未选中）
3. 选中需要的少数条目
4. 完成

**情况 C**：需要的和不需要的数量接近
1. 选中不需要的条目
2. 反向选择
3. 完成

## 注意事项

1. **视觉确认**：反向选择后，务必检查选中状态是否符合预期
2. **范围限制**：只影响当前可见的条目，不影响其他分组或文件
3. **搜索状态**：在搜索结果中使用时，只反转搜索结果中的选择
4. **空选择**：如果当前没有选中任何条目，反向选择会选中所有可见条目（相当于全选）
5. **全选状态**：如果已全选，反向选择会取消所有选择（全部变为未选中）
6. **无法撤销**：反向选择本身没有撤销功能，但可以再次执行反向选择恢复
7. **批量操作风险**：反向选择后进行的批量操作（如删除）要特别小心确认
8. **性能考虑**：对大量条目（数千条）进行反向选择可能需要短暂等待

## 最佳实践

### 操作前确认

在执行反向选择前：
1. 明确需要操作的目标条目
2. 确认排除条目的数量是否比包含条目少
3. 如果排除的更少，使用反向选择策略

### 操作后验证

反向选择后：
1. 检查选中条目的数量是否正确
2. 随机抽查几个选中的条目，确认是需要的
3. 确认排除的条目确实未被选中
4. 在执行批量操作前再次确认

### 配合快捷键

建立高效的操作习惯：
- 使用 `Command + A` 全选
- 使用 `Command + 点击` 多选或取消选中
- 使用反向选择快捷键快速切换
- 使用 `Escape` 取消所有选择

### 场景判断

**适合使用反向选择**：
- 需要操作的条目数量 >> 排除的条目数量
- 例如：100 条中需要 95 条，只排除 5 条

**不适合使用反向选择**：
- 需要的条目和排除的数量相近
- 需要的条目已经很容易直接选中

### 错误恢复

如果反向选择后发现选错了：
1. 不要执行任何批量操作
2. 再次执行反向选择，恢复原来的选择
3. 重新审视选择策略
4. 或点击列表空白处取消所有选择，重新开始

## 高级应用

### 组合筛选

使用反向选择可以实现复杂的筛选组合：

**示例需求**：导出所有"缺失翻译"但"不是本周新增"的条目

**操作流程**：
1. 应用"缺失翻译"筛选
2. 再应用"本周新增"筛选（多个筛选条件 AND 组合）
3. 结果是"缺失翻译且本周新增"的条目
4. 全选这些结果
5. 记录数量，比如 15 条
6. 移除"本周新增"筛选，只保留"缺失翻译"
7. 结果可能是 50 条
8. 搜索并选中之前记录的那 15 条（本周新增的）
9. 反向选择
10. 现在选中的是"缺失翻译但不是本周新增"的 35 条

注：这个流程比较复杂，实际使用中可能有更简单的筛选组合方式。

### 分批处理

**场景**：需要对 200 条进行人工审核，但排除已审核的 50 条

**操作流程**：
1. 选中已审核的 50 条（可能之前加了标记或在特定分组）
2. 反向选择，得到未审核的 150 条
3. 将这 150 条加入暂存区
4. 在暂存区中分批审核处理

## 与其他功能的配合

### 配合暂存区

1. 使用反向选择确定需要的条目
2. 将选中的条目加入暂存区
3. 在暂存区中进行后续操作
4. 清除选择，继续其他工作

### 配合导出

1. 使用反向选择选中需要导出的条目
2. 执行"导出选中内容"
3. 生成的文件只包含选中的条目

### 配合移动分组

1. 使用反向选择选中需要移动的条目
2. 执行"移动到分组"
3. 批量整理条目结构